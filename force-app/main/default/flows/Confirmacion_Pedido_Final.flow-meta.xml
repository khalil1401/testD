<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Async_Actualizar_Estado_Pedido</name>
        <label>Async Actualizar Estado Pedido</label>
        <locationX>666</locationX>
        <locationY>5402</locationY>
        <actionName>Async_ActualizarEstadoOrden</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Procesando_el_pedido</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>orderId</name>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Check_Cuota_Trade_Unit_Products</name>
        <label>Check Cuota Trade Unit Products</label>
        <locationX>666</locationX>
        <locationY>4370</locationY>
        <actionName>ConfirmOrderTradeUnit</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>OrderItem_TradeUnit_Erase_Assign</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>orderItems</name>
            <value>
                <elementReference>Dan360_ObtenerOrderItems</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Check_Products_Available</name>
        <label>Check Products Available</label>
        <locationX>666</locationX>
        <locationY>1322</locationY>
        <actionName>OrderConfirmationFlow</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>AsignarCountOrderItemUnAvailable</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>orderItems</name>
            <value>
                <elementReference>Obtener_productos_de_pedido</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>OrderItemUnAvailable</assignToReference>
            <name>output</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Email_Pedido_Confirmado</name>
        <label>Email Pedido Confirmado</label>
        <locationX>666</locationX>
        <locationY>5942</locationY>
        <actionName>Order.Dan360_NotificacionPedidoConfirmado</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Tipo_de_Venta</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Price_of_Products_is_changed</name>
        <label>Price_of_Products_is_changed</label>
        <locationX>919</locationX>
        <locationY>2546</locationY>
        <actionName>OrderPriceToConfirm</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Cantidad_Productos_actualizar</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>orderItems</name>
            <value>
                <elementReference>Obtener_productos_de_pedido</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Solicitar_Aprobaci_n</name>
        <label>Solicitar Aprobación</label>
        <locationX>666</locationX>
        <locationY>6158</locationY>
        <actionName>submit</actionName>
        <actionType>submit</actionType>
        <connector>
            <targetReference>Mostrar_Texto_Envio_Aprobacion</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>comment</name>
            <value>
                <stringValue> Se solicita la revisión y aprobación del siguiente Pedido Sin Cargo.  Muchas Gracias.</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>processDefinitionNameOrId</name>
            <value>
                <stringValue>Dan360_PedidoSinCargov1</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>objectId</name>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Update_precios</name>
        <label>Update precios</label>
        <locationX>666</locationX>
        <locationY>998</locationY>
        <actionName>updateMaterialsPrices</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>obtener_lista_de_precios</targetReference>
        </connector>
        <faultConnector>
            <targetReference>ErrorPedidoPrecios</targetReference>
        </faultConnector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>pedidoId</name>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <apiVersion>53.0</apiVersion>
    <assignments>
        <name>Asigna_estado_confirmaco</name>
        <label>Asigna estado confirmaco</label>
        <locationX>666</locationX>
        <locationY>5294</locationY>
        <assignmentItems>
            <assignToReference>Obtener_pedido.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Confirmado</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Obtener_pedido.Dan360_PedidoConfirmado__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Obtener_pedido.Dan360_FechasConfirmado__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FechasConfirmadoNOW</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Async_Actualizar_Estado_Pedido</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AsignarCountOrderItemUnAvailable</name>
        <label>AsignarCountOrderItemUnAvailable</label>
        <locationX>666</locationX>
        <locationY>1430</locationY>
        <assignmentItems>
            <assignToReference>countOrderItemsUnAvailable</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>OrderItemUnAvailable</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Hay_productos_deshabilitados</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AsignarOrderItemPlantilla</name>
        <label>AsignarOrderItemPlantilla</label>
        <locationX>600</locationX>
        <locationY>1754</locationY>
        <assignmentItems>
            <assignToReference>infoOrderItemUnAvailableText</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>OrderItemUnAvailablePlantilla</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Recorrer_OrderItem_UnAvailable</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Cantidad_Productos_actualizar</name>
        <label>Cantidad Productos actualizar</label>
        <locationX>919</locationX>
        <locationY>2654</locationY>
        <assignmentItems>
            <assignToReference>Tamano_Productos_Actualizar</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Price_of_Products_is_changed.orderItem</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Hay_productos_actualizar</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Mostrar_Texto_Envio_Aprobacion</name>
        <label>Mostrar Texto Envio Aprobacion</label>
        <locationX>666</locationX>
        <locationY>6266</locationY>
        <assignmentItems>
            <assignToReference>MostrarTextoAprobacion</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Pedidos_retenidos_por_Cuota</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>OrderItem_TradeUnit_Erase_Assign</name>
        <label>OrderItem TradeUnit Erase Assign</label>
        <locationX>666</locationX>
        <locationY>4478</locationY>
        <assignmentItems>
            <assignToReference>OrderItemTradeUnitEraseCount</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Check_Cuota_Trade_Unit_Products.orderItem</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Hay_Elementos_a_borrar</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>NoOk</name>
        <choiceText>Cancelar</choiceText>
        <dataType>Boolean</dataType>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </choices>
    <choices>
        <name>Ok</name>
        <choiceText>Aceptar</choiceText>
        <dataType>Boolean</dataType>
        <value>
            <booleanValue>true</booleanValue>
        </value>
    </choices>
    <decisions>
        <name>Acepta_cambios_de_precio</name>
        <label>Acepta cambios de precio</label>
        <locationX>721</locationX>
        <locationY>2978</locationY>
        <defaultConnector>
            <targetReference>Copia_1_de_Pedido_no_confirmado</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado predeterminado</defaultConnectorLabel>
        <rules>
            <name>Si_acepto</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Copia_1_de_DeseaContinuar</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Eliminar_Productos_Con_Dif</targetReference>
            </connector>
            <label>Si acepto</label>
        </rules>
    </decisions>
    <decisions>
        <name>Dan360_ValidarOrdenCompra</name>
        <label>Validar Orden Compra</label>
        <locationX>886</locationX>
        <locationY>3770</locationY>
        <defaultConnector>
            <targetReference>Dan360_RecorrerPedidosConfirmados</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado predeterminado</defaultConnectorLabel>
        <rules>
            <name>Dan360_MismaOrdenCompra</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Dan360_RecorrerPedidosConfirmados.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Confirmado</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Dan360_RecorrerPedidosConfirmados.EffectiveDate</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>FechaOrdenCompraTODAY</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Dan360_RecorrerPedidosConfirmados.Orden_de_compra__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Obtener_pedido.Orden_de_compra__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Dan360_MensajeOrdenCompra</targetReference>
            </connector>
            <label>¿Misma Orden de Compra?</label>
        </rules>
    </decisions>
    <decisions>
        <name>Desea_eliminar_productos</name>
        <label>Desea eliminar productos?</label>
        <locationX>512</locationX>
        <locationY>2054</locationY>
        <defaultConnector>
            <targetReference>es_sin_cargo</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado predeterminado</defaultConnectorLabel>
        <rules>
            <name>No</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ProductosNoOK</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <label>No</label>
        </rules>
    </decisions>
    <decisions>
        <name>Es_Borrador</name>
        <label>Es borrador?</label>
        <locationX>1598</locationX>
        <locationY>674</locationY>
        <defaultConnectorLabel>Resultado predeterminado</defaultConnectorLabel>
        <rules>
            <name>No_esta_confirmado</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Obtener_pedido.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Borrador</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Obtener_pedido.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Retenido por cuota</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Obtener_pedido.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Error</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Obtener_productos_de_pedido</targetReference>
            </connector>
            <label>Es Borrador/Retenido por cuota</label>
        </rules>
        <rules>
            <name>Ya_confirmado</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Obtener_pedido.Status</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Borrador</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Pantalla_Ya_Confirm</targetReference>
            </connector>
            <label>No es Borrador</label>
        </rules>
    </decisions>
    <decisions>
        <name>es_sin_cargo</name>
        <label>es sin cargo?</label>
        <locationX>666</locationX>
        <locationY>2438</locationY>
        <defaultConnector>
            <targetReference>Price_of_Products_is_changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado predeterminado</defaultConnectorLabel>
        <rules>
            <name>SinCargo</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Obtener_pedido.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>RecortypePedidoSinCargo</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Dan360_ObtenerPedidosCuenta</targetReference>
            </connector>
            <label>Si</label>
        </rules>
    </decisions>
    <decisions>
        <name>Hay_Elementos_a_borrar</name>
        <label>Hay Elementos a borrar?</label>
        <locationX>666</locationX>
        <locationY>4586</locationY>
        <defaultConnector>
            <targetReference>Asigna_estado_confirmaco</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado predeterminado</defaultConnectorLabel>
        <rules>
            <name>Yess</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>OrderItemTradeUnitEraseCount</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Misma_Orden</targetReference>
            </connector>
            <label>Si</label>
        </rules>
    </decisions>
    <decisions>
        <name>Hay_productos_actualizar</name>
        <label>Hay productos actualizar?</label>
        <locationX>919</locationX>
        <locationY>2762</locationY>
        <defaultConnector>
            <targetReference>Dan360_ObtenerPedidosCuenta</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado predeterminado</defaultConnectorLabel>
        <rules>
            <name>Si_hay</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Tamano_Productos_Actualizar</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copia_1_de_Producto_con_cambios</targetReference>
            </connector>
            <label>Si hay</label>
        </rules>
    </decisions>
    <decisions>
        <name>Hay_productos_de_pedido</name>
        <label>Hay productos de pedido?</label>
        <locationX>1111</locationX>
        <locationY>890</locationY>
        <defaultConnector>
            <targetReference>Pedido_noconfirmado</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado predeterminado</defaultConnectorLabel>
        <rules>
            <name>Hay_productos</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Obtener_productos_de_pedido</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_precios</targetReference>
            </connector>
            <label>Hay productos</label>
        </rules>
    </decisions>
    <decisions>
        <name>Hay_productos_deshabilitados</name>
        <label>Hay productos deshabilitados?</label>
        <locationX>666</locationX>
        <locationY>1538</locationY>
        <defaultConnector>
            <targetReference>es_sin_cargo</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado predeterminado</defaultConnectorLabel>
        <rules>
            <name>Si</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>countOrderItemsUnAvailable</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Recorrer_OrderItem_UnAvailable</targetReference>
            </connector>
            <label>Si</label>
        </rules>
    </decisions>
    <decisions>
        <name>Pedidos_actual_esta_retenido_por_Cuota</name>
        <label>Pedidos actual esta retenido por Cuota?</label>
        <locationX>864</locationX>
        <locationY>6566</locationY>
        <defaultConnectorLabel>Resultado predeterminado</defaultConnectorLabel>
        <rules>
            <name>Pedido_actual_retenido_por_cuota</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Orden_Actual_RetenidaPorCuotas.Id</leftValueReference>
                <operator>WasSet</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Pedido_Actual_retenidoPorCuotaPantalla</targetReference>
            </connector>
            <label>Si, pedido actual esta retenido por cuota</label>
        </rules>
    </decisions>
    <decisions>
        <name>Pedidos_retenidos_por_Cuota</name>
        <label>Pedidos retenidos por Cuota?</label>
        <locationX>666</locationX>
        <locationY>6458</locationY>
        <defaultConnector>
            <targetReference>Pedidos_actual_esta_retenido_por_Cuota</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado predeterminado</defaultConnectorLabel>
        <rules>
            <name>Siii</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Obtener_Pedidos_Retenidos_por_Cuota.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Retenido por cuota</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>RetenidoPorCuotaPantalla</targetReference>
            </connector>
            <label>Si</label>
        </rules>
    </decisions>
    <decisions>
        <name>Puede_Confirmar_Pedido</name>
        <label>Puede Confirmar Pedido?</label>
        <locationX>824</locationX>
        <locationY>566</locationY>
        <defaultConnector>
            <targetReference>Es_Borrador</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado predeterminado</defaultConnectorLabel>
        <rules>
            <name>Noo</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Obtener_PermissionSetAssignment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Obtener_pedido.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Retenido por cuota</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Error_Perfil_Incorrecto</targetReference>
            </connector>
            <label>No</label>
        </rules>
    </decisions>
    <decisions>
        <name>Tipo_de_Venta</name>
        <label>Tipo de Venta</label>
        <locationX>666</locationX>
        <locationY>6050</locationY>
        <defaultConnector>
            <targetReference>Pedidos_retenidos_por_Cuota</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado predeterminado</defaultConnectorLabel>
        <rules>
            <name>Venta_Directa</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Obtener_pedido.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>RecordtypeVentaDirecta</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Obtener_pedido.Dan360_PedidoConfirmado__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Enviar_A_SAP</targetReference>
            </connector>
            <label>Venta Directa</label>
        </rules>
        <rules>
            <name>Venta_Sin_Cargo</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Obtener_pedido.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>RecortypePedidoSinCargo</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Obtener_pedido.Dan360_En_aprobacion__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Solicitar_Aprobaci_n</targetReference>
            </connector>
            <label>Venta Sin Cargo</label>
        </rules>
    </decisions>
    <decisions>
        <name>Update_Misma_Orden</name>
        <label>Update Misma Orden?</label>
        <locationX>468</locationX>
        <locationY>4694</locationY>
        <defaultConnector>
            <targetReference>Erase_OrderItem_TradeUnit</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado predeterminado</defaultConnectorLabel>
        <rules>
            <name>Sii</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Check_Cuota_Trade_Unit_Products.updateSameOrder</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Actualizar_Retenido_Por_Cuota</targetReference>
            </connector>
            <label>Si</label>
        </rules>
    </decisions>
    <description>Flujo usado en el boton &quot;Confirmar Pedido&quot; del Order</description>
    <environments>Default</environments>
    <formulas>
        <name>FechaOrdenCompraTODAY</name>
        <dataType>Date</dataType>
        <expression>TODAY()</expression>
    </formulas>
    <formulas>
        <name>FechasConfirmadoNOW</name>
        <dataType>DateTime</dataType>
        <expression>NOW()</expression>
    </formulas>
    <interviewLabel>Confirmacion Pedido Final {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Confirmacion Pedido</label>
    <loops>
        <name>Dan360_RecorrerPedidosConfirmados</name>
        <label>Recorrer Pedidos Confirmados</label>
        <locationX>666</locationX>
        <locationY>3662</locationY>
        <collectionReference>Dan360_ObtenerPedidosCuenta</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Dan360_ValidarOrdenCompra</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Dan360_ObtenerOrderItems</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Recorrer_OrderItem_UnAvailable</name>
        <label>Recorrer Order Item UnAvailable</label>
        <locationX>512</locationX>
        <locationY>1646</locationY>
        <collectionReference>OrderItemUnAvailable</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>AsignarOrderItemPlantilla</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Productos_inhabilitados</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Insertar_Nuevos_OrderItems</name>
        <label>Insertar Nuevos OrderItems</label>
        <locationX>589</locationX>
        <locationY>3194</locationY>
        <connector>
            <targetReference>Dan360_ObtenerPedidosCuenta</targetReference>
        </connector>
        <inputReference>Price_of_Products_is_changed.orderItemUpdate</inputReference>
    </recordCreates>
    <recordDeletes>
        <name>Eliminar_Productos_Con_Dif</name>
        <label>Eliminar Productos Con Dif</label>
        <locationX>589</locationX>
        <locationY>3086</locationY>
        <connector>
            <targetReference>Insertar_Nuevos_OrderItems</targetReference>
        </connector>
        <inputReference>Price_of_Products_is_changed.orderItem</inputReference>
    </recordDeletes>
    <recordDeletes>
        <name>Erase_OrderItem_TradeUnit</name>
        <label>Erase OrderItem TradeUnit</label>
        <locationX>600</locationX>
        <locationY>4802</locationY>
        <connector>
            <targetReference>Asigna_estado_confirmaco</targetReference>
        </connector>
        <inputReference>Check_Cuota_Trade_Unit_Products.orderItem</inputReference>
    </recordDeletes>
    <recordLookups>
        <name>Dan360_ObtenerOrderItems</name>
        <label>Obtener OrderItems</label>
        <locationX>666</locationX>
        <locationY>4262</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Cuota_Trade_Unit_Products</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OrderId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Obtener_pedido.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>OrderItem</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Dan360_ObtenerPedidosCuenta</name>
        <label>Obtener Pedidos de la Cuenta</label>
        <locationX>666</locationX>
        <locationY>3554</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Dan360_RecorrerPedidosConfirmados</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>AccountId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Obtener_pedido.Account.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Status</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Confirmado</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Order</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_UserProfile</name>
        <label>Get UserProfile</label>
        <locationX>824</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Obtener_PermissionSet</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>UserProfileId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Profile</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>obtener_lista_de_precios</name>
        <label>obtener lista de precios</label>
        <locationX>666</locationX>
        <locationY>1106</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Obtener_productos_de_lista_de_precios</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Obtener_pedido.Pricebook2Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Pricebook2</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Obtener_pedido</name>
        <label>Obtener pedido</label>
        <locationX>824</locationX>
        <locationY>458</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Puede_Confirmar_Pedido</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Order</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Obtener_Pedido_Recien_Confirmado</name>
        <label>Obtener Pedido Recien Confirmado</label>
        <locationX>666</locationX>
        <locationY>5618</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Obtener_Pedidos_Retenidos_por_Cuota</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Order</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Status</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Obtener_Pedidos_Retenidos_por_Cuota</name>
        <label>Obtener Pedidos Retenidos por Cuota</label>
        <locationX>666</locationX>
        <locationY>5726</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Orden_Actual_RetenidaPorCuotas</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Dan360_PedidoPrincipal__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Status</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Retenido por cuota</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Order</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Obtener_PermissionSet</name>
        <label>Obtener PermissionSet</label>
        <locationX>824</locationX>
        <locationY>242</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Obtener_PermissionSetAssignment</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Label</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Confirmar Pedidos Retenidos Cuota</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PermissionSet</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Obtener_PermissionSetAssignment</name>
        <label>Obtener PermissionSetAssignment</label>
        <locationX>824</locationX>
        <locationY>350</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Obtener_pedido</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>PermissionSetId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Obtener_PermissionSet.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>AssigneeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PermissionSetAssignment</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Obtener_productos_de_lista_de_precios</name>
        <label>Obtener productos de lista de precios</label>
        <locationX>666</locationX>
        <locationY>1214</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Products_Available</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Pricebook2Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>obtener_lista_de_precios.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>PricebookEntry</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Obtener_productos_de_pedido</name>
        <label>Obtener productos de pedido</label>
        <locationX>1111</locationX>
        <locationY>782</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Hay_productos_de_pedido</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OrderId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Obtener_pedido.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>OrderItem</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Aqui verificamos si la orden que ejecuto este flow paso a retenido por cuota, ya que si se tiene stock 0 en la cuota no se va a  generar una orden nueva sino que la misma pasa a Retenida por cuota</description>
        <name>Orden_Actual_RetenidaPorCuotas</name>
        <label>Orden Actual RetenidaPorCuotas?</label>
        <locationX>666</locationX>
        <locationY>5834</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Email_Pedido_Confirmado</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Status</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Retenido por cuota</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Order</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Actualizar_Retenido_Por_Cuota</name>
        <label>Actualizar Retenido Por Cuota</label>
        <locationX>336</locationX>
        <locationY>4802</locationY>
        <connector>
            <targetReference>Pantalla_Retenido_Por_Cuota</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Dan360_SemaforoPicklist__c</field>
            <value>
                <stringValue>Rojo</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Retenido por cuota</stringValue>
            </value>
        </inputAssignments>
        <object>Order</object>
    </recordUpdates>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <screens>
        <name>ConfirmacionPedidoPantalla</name>
        <label>ConfirmacionPedidoPantalla</label>
        <locationX>468</locationX>
        <locationY>6674</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>ConfirmacionPedidoTexto</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;font-family: tahoma; background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt;El Pedido &lt;/strong&gt;&lt;strong style=&quot;font-family: tahoma; background-color: rgb(255, 255, 255); color: rgb(45, 43, 186);&quot;&gt;{!Obtener_pedido.OrderNumber}&lt;/strong&gt;&lt;strong style=&quot;font-family: tahoma; background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt; ha sido confirmado exitosamente.&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>EnviarAprobacionTexto</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;font-family: tahoma; background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt;El pedido será enviado a aprobación.&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>MostrarTextoAprobacion</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <booleanValue>true</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Copia_1_de_Pedido_no_confirmado</name>
        <label>Copia 1 de Pedido no confirmado</label>
        <locationX>853</locationX>
        <locationY>3086</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>Copia_1_de_NoConfirmado</name>
            <fieldText>&lt;p&gt;&lt;b style=&quot;font-family: tahoma; background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt;El Pedido &lt;/b&gt;&lt;b style=&quot;font-family: tahoma; background-color: rgb(255, 255, 255); color: rgb(45, 43, 186);&quot;&gt;{!Obtener_pedido.OrderNumber}&lt;/b&gt;&lt;b style=&quot;font-family: tahoma; background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt; no ha sido confirmado.&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Copia_1_de_Producto_con_cambios</name>
        <label>Copia 1 de Producto con cambios</label>
        <locationX>721</locationX>
        <locationY>2870</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <backButtonLabel>Cancelar</backButtonLabel>
        <connector>
            <targetReference>Acepta_cambios_de_precio</targetReference>
        </connector>
        <fields>
            <name>Copia_1_de_MensajePedidoConfirmadio_0_0</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255); font-family: tahoma;&quot;&gt;El Pedido &lt;/strong&gt;&lt;strong style=&quot;color: rgb(45, 43, 186); background-color: rgb(255, 255, 255); font-family: tahoma;&quot;&gt;{!Obtener_pedido.OrderNumber}&lt;/strong&gt;&lt;strong style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255); font-family: tahoma;&quot;&gt; ha sufrido los siguientes  cambios: &lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;{!Price_of_Products_is_changed.oldPrice}&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Copia_1_de_DeseaContinuar</name>
            <choiceReferences>Ok</choiceReferences>
            <choiceReferences>NoOk</choiceReferences>
            <dataType>Boolean</dataType>
            <fieldText>¿Desea continuar?</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Dan360_MensajeOrdenCompra</name>
        <label>MensajeOrdenCompra</label>
        <locationX>754</locationX>
        <locationY>3878</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>Dan360_OrdenCompraToday</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;font-family: tahoma;&quot;&gt;La orden de compra &lt;/span&gt;&lt;strong style=&quot;font-family: tahoma;&quot;&gt;&quot;{!Dan360_RecorrerPedidosConfirmados.Orden_de_compra__c}&quot;&lt;/strong&gt;&lt;span style=&quot;font-family: tahoma;&quot;&gt; del pedido &lt;/span&gt;&lt;strong style=&quot;font-family: tahoma;&quot;&gt;&quot;{!Obtener_pedido.OrderNumber}&quot;&lt;/strong&gt;&lt;span style=&quot;font-family: tahoma;&quot;&gt; ya fue confirmada el día de hoy&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Error_Perfil_Incorrecto</name>
        <label>Error Perfil Incorrecto</label>
        <locationX>50</locationX>
        <locationY>674</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Copia_1_de_Error_Ya_Confirm</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(234, 18, 18);&quot;&gt;ERROR:&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;No posee los permisos para confirmar dicho pedido&lt;/strong&gt;&lt;strong style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255); font-family: tahoma;&quot;&gt;.&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>ErrorPedidoPrecios</name>
        <label>ErrorPedidoPrecios</label>
        <locationX>1293</locationX>
        <locationY>1106</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>ErrorPrecios</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(228, 6, 6);&quot;&gt;Error:&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;No se pudo actualizar la lista de precios&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;em style=&quot;font-size: 10px;&quot;&gt;Problemas externos a salesforce&lt;/em&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Pantalla_Retenido_Por_Cuota</name>
        <label>Pantalla Retenido Por Cuota</label>
        <locationX>336</locationX>
        <locationY>4910</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Copia_2_de_HayProductos</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;font-family: tahoma; background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt;El Pedido &lt;/strong&gt;&lt;strong style=&quot;background-color: rgb(255, 255, 255); color: rgb(45, 43, 186); font-family: tahoma;&quot;&gt;{!Obtener_pedido.OrderNumber}&lt;/strong&gt;&lt;strong style=&quot;font-family: tahoma; background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt; ha sido retenido por cuota. El saldo actual de la cuota es menor a la cantidad de unidades mínima establecida para el producto seleccionado.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Pantalla_Ya_Confirm</name>
        <label>Pantalla Ya Confirm</label>
        <locationX>1821</locationX>
        <locationY>782</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Error_Ya_Confirm</name>
            <fieldText>&lt;p&gt;&lt;b style=&quot;color: rgb(234, 18, 18);&quot;&gt;ERROR:&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;font-family: tahoma; background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt;Solo se pueden confirmar los pedidos en estado borrador.&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Pedido_Actual_retenidoPorCuotaPantalla</name>
        <label>Pedido Actual retenidoPorCuotaPantalla</label>
        <locationX>732</locationX>
        <locationY>6674</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Copy_2_of_RetenidoPorCuotaTexto</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255); font-family: tahoma;&quot;&gt;El Pedido actual no cubrió la cantidad total de unidades.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255); font-family: tahoma;&quot;&gt;El pedido actual, &lt;/strong&gt;&lt;strong style=&quot;color: rgb(3, 110, 199); background-color: rgb(255, 255, 255); font-family: tahoma;&quot;&gt;{!Orden_Actual_RetenidaPorCuotas.OrderNumber}&lt;/strong&gt;&lt;strong style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255); font-family: tahoma;&quot;&gt;, quedo retenido por cuota.&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Pedido_noconfirmado</name>
        <label>Pedido no confirmado</label>
        <locationX>1557</locationX>
        <locationY>998</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>MensajePedidoConfirmadio_0</name>
            <fieldText>&lt;p&gt;&lt;b style=&quot;font-family: tahoma; background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt;El Pedido &lt;/b&gt;&lt;b style=&quot;font-family: tahoma; background-color: rgb(255, 255, 255); color: rgb(45, 43, 186);&quot;&gt;{!Obtener_pedido.OrderNumber}&lt;/b&gt;&lt;b style=&quot;font-family: tahoma; background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt; no ha podido confirmarse. Verifique si tiene productos e inténtelo de nuevo.&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Procesando_el_pedido</name>
        <label>Procesando el pedido</label>
        <locationX>666</locationX>
        <locationY>5510</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Obtener_Pedido_Recien_Confirmado</targetReference>
        </connector>
        <fields>
            <name>Procesando_el_pedido_async</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;Se esta procesando el pedido...&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Productos_inhabilitados</name>
        <label>Productos inhabilitados</label>
        <locationX>512</locationX>
        <locationY>1946</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Desea_eliminar_productos</targetReference>
        </connector>
        <fields>
            <name>Mensaje_Productos_Deshabilitados</name>
            <fieldText>&lt;p&gt;Estos productos seleccionados no se encuentran habilitados:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;{!infoOrderItemUnAvailableText}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;strong style=&quot;font-size: 11px; color: rgb(244, 62, 62);&quot;&gt;&lt;em&gt;Si acepta, los productos deshabilitados serán eliminados y el pedido será confirmado automáticamente.&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>ProductosNoOK</name>
            <choiceReferences>Ok</choiceReferences>
            <choiceReferences>NoOk</choiceReferences>
            <dataType>Boolean</dataType>
            <fieldText>Desea Continuar?</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>RetenidoPorCuotaPantalla</name>
        <label>RetenidoPorCuotaPantalla</label>
        <locationX>468</locationX>
        <locationY>6566</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>ConfirmacionPedidoPantalla</targetReference>
        </connector>
        <fields>
            <name>RetenidoPorCuotaTexto</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255); font-family: tahoma;&quot;&gt;El Pedido actual no cubrió la cantidad total de unidades.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255); font-family: tahoma;&quot;&gt;El pedido &lt;/strong&gt;&lt;strong style=&quot;color: rgb(3, 110, 199); background-color: rgb(255, 255, 255); font-family: tahoma;&quot;&gt;{!Obtener_Pedidos_Retenidos_por_Cuota.OrderNumber}&lt;/strong&gt;&lt;strong style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255); font-family: tahoma;&quot;&gt;, quedo retenido por cuota.&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>698</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_UserProfile</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <name>Enviar_A_SAP</name>
        <label>Enviar A SAP</label>
        <locationX>402</locationX>
        <locationY>6158</locationY>
        <connector>
            <targetReference>Pedidos_retenidos_por_Cuota</targetReference>
        </connector>
        <flowName>Enviar_a_SAP_Sub_Confirmacion_Pedido</flowName>
        <inputAssignments>
            <name>IdPedidoAEnviar</name>
            <value>
                <elementReference>Obtener_Pedido_Recien_Confirmado.Id</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <textTemplates>
        <name>NuevoPrecio</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>&lt;/br&gt;</text>
    </textTemplates>
    <textTemplates>
        <name>OrderItemUnAvailablePlantilla</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>{!Recorrer_OrderItem_UnAvailable.Product2.Name}</text>
    </textTemplates>
    <variables>
        <name>AcumulaPrecios</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>PricebookEntry</objectType>
    </variables>
    <variables>
        <name>AcumulaProductos</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>countOrderItemsUnAvailable</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>currentItem_tes</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>PricebookEntry</objectType>
    </variables>
    <variables>
        <name>idProducto</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>InfoNuevosPrecios</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>infoOrderItemUnAvailableText</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>MostrarTextoAprobacion</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>OrderItemsAfterTradeUnit</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>OrderItemTradeUnitEraseCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>OrderItemUnAvailable</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>orderItemWithPriceChanged</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>PrecioAnterior</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ProductosDePedido</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>ProductosDePedidoAActualizar</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>ProductosDePedidoToCheck</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>ProductosPrecioAnterior</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>ProductosQueCambiaron</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>ProductoUnidadesPorBulto</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>RecordtypeVentaDirecta</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Dan360_PedidoVentaDirecta</stringValue>
        </value>
    </variables>
    <variables>
        <name>RecortypePedidoSinCargo</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Dan360_PedidoSinCargo</stringValue>
        </value>
    </variables>
    <variables>
        <name>SaldoDeLaCuota</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>Tamano_Productos_Actualizar</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>TextoErrorCreacionPedido</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>UserProfileId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <elementReference>$User.ProfileId</elementReference>
        </value>
    </variables>
</Flow>
